<div class="container-fluid">
  <div class="row">
    <div class="col-sm-3"></div>
    <div class="col">

      <mat-card class="mat-elevation-z6">

        <mat-card-title>Nueva mascota</mat-card-title>
        <mat-card-subtitle>
          (Se creará también una publicación)
          <span class="badge badge-pill badge-primary ml-2" matTooltip="{{infoCreacionPublicacion}}" 
            style="font-size:0.8em; cursor:pointer"><i class="fas fa-info"></i>
          </span>
        </mat-card-subtitle>

        <form [formGroup]="formCarga" (ngSubmit)="cargarMascota()">

          <table class="example-full-width">
            <tr>
              <td style="width:50%">
                <mat-form-field>
                  <mat-label>Nombre de la mascota*</mat-label>
                  <input matInput #nombreMascotaId maxlength="15" [errorStateMatcher]="errorMatcher"
                    formControlName="nombreMascotaCtrl" (change)="ifAllValid()">
                  <mat-hint align="end">{{nombreMascotaId.value?.length || 0}}/15</mat-hint>

                  <mat-error *ngIf="getNombreMascota.hasError('minlength')">
                    El nombre es demasiado corto.
                  </mat-error>
                  <mat-error *ngIf="getNombreMascota.hasError('required')">
                    El nombre es requerido.
                  </mat-error>
                  <mat-error *ngIf="getNombreMascota.errors && (getNombreMascota.value != '')">
                    Se permite solo texto
                  </mat-error>
                </mat-form-field>
              </td>
              <td style="width:50%">
                <mat-form-field class=" pull-right">
                  <mat-label>Seleccione especie*</mat-label>
                  <mat-select placeholder="Especie" formControlName="especieMascotaCtrl" 
                    [errorStateMatcher]="errorMatcher">
                    <mat-option *ngFor="let op of especies" [value]="op" (change)="ifAllValid()">
                      <i class='{{op.icon}} mr-1'></i> {{op.name}}
                    </mat-option>
                  </mat-select>

                  <mat-error *ngIf="getEspecieMascota.hasError('required')">
                    Debe seleccionar una especie.
                  </mat-error>
                </mat-form-field>
              </td>
            </tr>
            <tr>
              <td style="width:50%">
                <mat-form-field>
                  <mat-label>Apellido de la mascota*</mat-label>
                  <input matInput #apellidoMascotaId maxlength="15" [errorStateMatcher]="errorMatcher"
                    formControlName="apellidoMascotaCtrl" (change)="ifAllValid()">
                  <mat-hint align="end">{{apellidoMascotaId.value?.length || 0}}/15</mat-hint>

                  <mat-error *ngIf="getApellidoMascota.hasError('minlenth')">
                    El apellido es demasiado corto.
                  </mat-error>
                  <mat-error *ngIf="getApellidoMascota.hasError('maxlenth')">
                      El apellido es demasiado largo.
                    </mat-error>
                  <mat-error *ngIf="getApellidoMascota.hasError('required')">
                    El apellido es requerido.
                  </mat-error>
                  <mat-error *ngIf="getApellidoMascota.errors && (getApellidoMascota.value != '')">
                    Se permite solo texto
                  </mat-error>
                </mat-form-field>
              </td>
              <td style="width:50%">
                <mat-form-field class="mt-4 pull-right">
                  <mat-label>Ingrese edad aprox.</mat-label>
                  <input matInput #edadAproxId type="number" [errorStateMatcher]="errorMatcher"
                    formControlName="edadAproxCtrl" (change)="ifAllValid()">

                  <mat-error *ngIf="getEdadAprox.hasError('min')">
                    La edad minima es de 1 mes/año
                  </mat-error>
                  <mat-error *ngIf="getEdadAprox.hasError('max')">
                    La edad maxima es de 100 años
                  </mat-error>
                  <mat-error *ngIf="getEdadAprox.hasError('required')">
                    La edad es requerida.
                  </mat-error>
                </mat-form-field>

                <mat-radio-group class="ml-5" formControlName="tipoEdadCtrl" (change)="ifAllValid()">
                  <mat-radio-button [checked]='true' value="A">En años</mat-radio-button>
                  <mat-radio-button class="ml-3" value="M">En meses</mat-radio-button>
                </mat-radio-group>
              </td>
            </tr>
            <tr>
              <td style="width:50%">
                <mat-form-field appearance="outline">
                  <mat-label>Descripción*</mat-label>
                  <textarea matInput #descripcionMascotaId [errorStateMatcher]="errorMatcher"
                    (change)="ifAllValid()" formControlName="descripcionMascotaCtrl"> </textarea>
                  <mat-hint align="end">{{descripcionMascotaId.value?.length || 0}}/500</mat-hint>
                  <mat-hint>No mencionar la raza
                    <span class="badge badge-pill badge-primary ml-2" matTooltip="{{aviso}}"
                      style="font-size:0.8em; cursor:pointer">
                      <i class="fas fa-info"></i></span>
                  </mat-hint>

                  <mat-error *ngIf="getDescripcionMascota.hasError('required')">
                    Debe ingresar una descripcón.
                  </mat-error>
                </mat-form-field>
              </td>
            </tr>
          </table>

          <mat-slide-toggle [checked]="checkedPrivada" class="mt-4">Publicación privada</mat-slide-toggle>
          <span class="badge badge-pill badge-primary ml-2" matTooltip="{{avisoVisibilidad}}"
            style="font-size:0.6em; cursor:pointer; vertical-align: text-top;">
            <i class="fas fa-info"></i>
          </span>
          
          <hr>
          <input hidden #fileInput class="mt-3" type='file'
            accept=".jpg,.jpeg,.png,.PNG,.JPG" (change)="onSelectFile($event)">
          <button type="button" mat-raised-button (click)="fileInput.click()">
            Elegir imagen
          </button>
          <p> <img class="mt-2" [src]="url" *ngIf="url" required> </p>
          <mat-error *ngIf="submitted && (imagenes.length < 1)">
            Debe ingresar una imagen.
          </mat-error>

          <div class="text-center">
            <mat-error *ngIf="submitted && error">{{error_message}}</mat-error>
          </div>

          <br />  
          <mat-card-actions>
            <span class="mt-3 small">*Campos requeridos</span>
            <button type="submit" class="btn btn-outline-primary pull-right"> 
                Crear <i class="far fa-paper-plane"></i>
            </button>
          </mat-card-actions>
        </form>

        <mat-card-footer>
        </mat-card-footer>
      </mat-card>

    </div>
    <div class="col-sm-3"></div>
  </div>
</div>